#include "logicdefs.h"
#include "GameId.h"
#include <mll/utils/unicode.h>

namespace PoL
{

//=====================================================================================//
//                          static GUID Mark::genGuidString()                          //
//=====================================================================================//
// Получение GUID'а
static GUID genGuid()
{
	GUID tmp_win_guid;
	CoCreateGuid(&tmp_win_guid);
	return tmp_win_guid;
}

//=====================================================================================//
//                                  GameId::GameId()                                   //
//=====================================================================================//
GameId::GameId()
{
	generate();
}

//=====================================================================================//
//                               void GameId::generate()                               //
//=====================================================================================//
void GameId::generate()
{
	GUID guid = genGuid();
	assert( sizeof(id) == sizeof(GUID) );

	memcpy(id,&guid,sizeof(id));
}

//=====================================================================================//
//                                 void GameId::save()                                 //
//=====================================================================================//
void GameId::save(SavSlot &slot)
{
	slot.Save(id,sizeof(id));
}

//=====================================================================================//
//                                 void GameId::load()                                 //
//=====================================================================================//
void GameId::load(SavSlot &slot)
{
	slot.Load(id,sizeof(id));
}

}

