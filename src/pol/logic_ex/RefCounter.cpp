#include "precomp.h"
#include "RefCounter.h"

namespace PoL
{

//=====================================================================================//
//                              RefCounter::RefCounter()                               //
//=====================================================================================//
RefCounter::RefCounter(Id_t id, HCounter ctr)
:	Counter(id),
	m_ctr(ctr)
{
	if(m_ctr) m_conn = m_ctr->addFn(boost::bind(onCounterChanged,this));
}

//=====================================================================================//
//                              RefCounter::~RefCounter()                              //
//=====================================================================================//
RefCounter::~RefCounter()
{
}

//=====================================================================================//
//                         void RefCounter::onCounterChanged()                         //
//=====================================================================================//
void RefCounter::onCounterChanged()
{
	notify();
}

//=====================================================================================//
//                           void RefCounter::store() const                            //
//=====================================================================================//
void RefCounter::store(mll::io::obinstream &out) const
{
	Counter::store(out);
}

//=====================================================================================//
//                             void RefCounter::restore()                              //
//=====================================================================================//
void RefCounter::restore(mll::io::ibinstream &in)
{
	Counter::restore(in);
}


//=====================================================================================//
//                              void RefCounter::reset()                               //
//=====================================================================================//
void RefCounter::reset()
{
}

}